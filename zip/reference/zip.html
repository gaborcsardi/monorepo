<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Compress Files into 'zip' Archives — zip • zip</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Compress Files into 'zip' Archives — zip"><meta property="og:description" content="zip() creates a new zip archive file.

"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">zip</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.2.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/r-lib/zip/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Compress Files into 'zip' Archives</h1>
    <small class="dont-index">Source: <a href="https://github.com/r-lib/zip/blob/HEAD/R/zip.R" class="external-link"><code>R/zip.R</code></a></small>
    <div class="hidden name"><code>zip.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>zip()</code> creates a new zip archive file.</p>
<p><link rel="stylesheet" type="text/css" href="../doc/assets/extra.css"></p>
<p><script src="../doc/assets/rd.js"></script></p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">zip</span><span class="op">(</span></span>
<span>  <span class="va">zipfile</span>,</span>
<span>  <span class="va">files</span>,</span>
<span>  recurse <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  compression_level <span class="op">=</span> <span class="fl">9</span>,</span>
<span>  include_directories <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  root <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  mode <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mirror"</span>, <span class="st">"cherry-pick"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">zipr</span><span class="op">(</span></span>
<span>  <span class="va">zipfile</span>,</span>
<span>  <span class="va">files</span>,</span>
<span>  recurse <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  compression_level <span class="op">=</span> <span class="fl">9</span>,</span>
<span>  include_directories <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  root <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  mode <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cherry-pick"</span>, <span class="st">"mirror"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">zip_append</span><span class="op">(</span></span>
<span>  <span class="va">zipfile</span>,</span>
<span>  <span class="va">files</span>,</span>
<span>  recurse <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  compression_level <span class="op">=</span> <span class="fl">9</span>,</span>
<span>  include_directories <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  root <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  mode <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mirror"</span>, <span class="st">"cherry-pick"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">zipr_append</span><span class="op">(</span></span>
<span>  <span class="va">zipfile</span>,</span>
<span>  <span class="va">files</span>,</span>
<span>  recurse <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  compression_level <span class="op">=</span> <span class="fl">9</span>,</span>
<span>  include_directories <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  root <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  mode <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cherry-pick"</span>, <span class="st">"mirror"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>zipfile</dt>
<dd><p>The zip file to create. If the file exists, <code>zip</code>
overwrites it, but <code>zip_append</code> appends to it.</p></dd>


<dt>files</dt>
<dd><p>List of file to add to the archive. See details below
about absolute and relative path names.</p></dd>


<dt>recurse</dt>
<dd><p>Whether to add the contents of directories recursively.</p></dd>


<dt>compression_level</dt>
<dd><p>A number between 1 and 9. 9 compresses best,
but it also takes the longest.</p></dd>


<dt>include_directories</dt>
<dd><p>Whether to explicitly include directories
in the archive. Including directories might confuse MS Office when
reading docx files, so set this to <code>FALSE</code> for creating them.</p></dd>


<dt>root</dt>
<dd><p>Change to this working directory before creating the
archive.</p></dd>


<dt>mode</dt>
<dd><p>Selects how files and directories are stored in
the archice. It can be <code>"mirror"</code> or <code>"cherry-pick"</code>.
See "Relative Paths" below for details.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>The name of the created zip file, invisibly.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p><code>zip_append()</code> appends compressed files to an existing 'zip' file.</p><div class="section">
<h3 id="relative-paths">Relative paths<a class="anchor" aria-label="anchor" href="#relative-paths"></a></h3>


<p><code>zip()</code> and <code>zip_append()</code> can run in two different modes: mirror
mode and cherry picking mode. They handle the specified <code>files</code>
differently.</p><div class="section">
<h4 id="mirror-mode">Mirror mode<a class="anchor" aria-label="anchor" href="#mirror-mode"></a></h4>


<p>Mirror mode is for creating the zip archive of a directory structure,
exactly as it is on the disk. The current working directory will
be the root of the archive, and the paths will be fully kept.
zip changes the current directory to <code>root</code> before creating the
archive.</p>
<p>(Absolute paths are also kept. Note that this might result
non-portable archives: some zip tools do not handle zip archives that
contain absolute file names, or file names that start with <code>../</code> or
<code>./</code>. zip warns you if this should happen.)</p>
<p>E.g. consider the following directory structure:</p><div class="sourceCode"><pre><code>.
|-- foo
|   |-- bar
|   |   |-- file1
|   |   `-- file2
|   `-- bar2
`-- foo2
    `-- file3
</code></pre></div>

<p>Assuming the current working directory is <code>foo</code>, the following zip
entries are created by <code>zip</code>:</p><div class="r"><div class="sourceCode"><pre><code><span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="st">"foo"</span><span class="op">)</span></span>
<span><span class="fu">zip</span><span class="fu">::</span><span class="fu"><a href="../reference/zip.html">zip</a></span><span class="op">(</span><span class="st">"../test.zip"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bar/file1"</span>, <span class="st">"bar2"</span>, <span class="st">"../foo2"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div><p></p></div><div class="sourceCode"><pre><code><span><span class="co">## Warning in warn_for_dotdot(data$key): Some paths reference parent directory,</span></span>
<span><span class="co">## creating non-portable zip file</span></span></code></pre></div><p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="fu"><a href="../reference/zip_list.html">zip_list</a></span><span class="op">(</span><span class="st">"../test.zip"</span><span class="op">)</span><span class="op">[</span>, <span class="st">"filename"</span>, drop <span class="op">=</span> <span class="cn">FALSE</span><span class="op">]</span></span></code></pre></div><p></p></div><div class="sourceCode"><pre><code><span><span class="co">##        filename</span></span>
<span><span class="co">## 1     bar/file1</span></span>
<span><span class="co">## 2         bar2/</span></span>
<span><span class="co">## 3      ../foo2/</span></span>
<span><span class="co">## 4 ../foo2/file3</span></span></code></pre></div>

</div>

<div class="section">
<h4 id="cherry-picking-mode">Cherry picking mode<a class="anchor" aria-label="anchor" href="#cherry-picking-mode"></a></h4>


<p>In cherry picking mode, the selected files and directories
will be at the root of the archive. This mode is handy if you
want to select a subset of files and directories, possibly from
different paths and put all of the in the archive, at the top
level.</p>
<p>Here is an example with the same directory structure as above:</p><div class="r"><div class="sourceCode"><pre><code><span><span class="fu">zip</span><span class="fu">::</span><span class="fu"><a href="../reference/zip.html">zip</a></span><span class="op">(</span></span>
<span>  <span class="st">"../test2.zip"</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bar/file1"</span>, <span class="st">"bar2"</span>, <span class="st">"../foo2"</span><span class="op">)</span>,</span>
<span>  mode <span class="op">=</span> <span class="st">"cherry-pick"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/zip_list.html">zip_list</a></span><span class="op">(</span><span class="st">"../test2.zip"</span><span class="op">)</span><span class="op">[</span>, <span class="st">"filename"</span>, drop <span class="op">=</span> <span class="cn">FALSE</span><span class="op">]</span></span></code></pre></div><p></p></div><div class="sourceCode"><pre><code><span><span class="co">##     filename</span></span>
<span><span class="co">## 1      file1</span></span>
<span><span class="co">## 2      bar2/</span></span>
<span><span class="co">## 3      foo2/</span></span>
<span><span class="co">## 4 foo2/file3</span></span></code></pre></div>

</div>


</div>

<div class="section">
<h3 id="permissions-">Permissions:<a class="anchor" aria-label="anchor" href="#permissions-"></a></h3>


<p><code>zip()</code> (and <code>zip_append()</code>, etc.) add the permissions of
the archived files and directories to the ZIP archive, on Unix systems.
Most zip and unzip implementations support these, so they will be
recovered after extracting the archive.</p>
<p>Note, however that the owner and group (uid and gid) are currently
omitted, even on Unix.</p>
</div>

<div class="section">
<h3 id="zipr-and-zipr-append-"><code>zipr()</code> and <code>zipr_append()</code><a class="anchor" aria-label="anchor" href="#zipr-and-zipr-append-"></a></h3>


<p>These function exist for historical reasons. They are identical
to <code>zip()</code> and <code>zipr_append()</code> with a different default for the
<code>mode</code> argument.</p>
</div>

    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## Some files to zip up. We will run all this in the R sesion's</span></span></span>
<span class="r-in"><span><span class="co">## temporary directory, to avoid messing up the user's workspace.</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">tmp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tmp</span>, <span class="st">"mydir"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"first file"</span>, file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tmp</span>, <span class="st">"mydir"</span>, <span class="st">"file1"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"second file"</span>, file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tmp</span>, <span class="st">"mydir"</span>, <span class="st">"file2"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">zipfile</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".zip"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">zip</span><span class="fu">::</span><span class="fu">zip</span><span class="op">(</span><span class="va">zipfile</span>, <span class="st">"mydir"</span>, root <span class="op">=</span> <span class="va">tmp</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## List contents</span></span></span>
<span class="r-in"><span><span class="fu"><a href="zip_list.html">zip_list</a></span><span class="op">(</span><span class="va">zipfile</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      filename compressed_size uncompressed_size           timestamp permissions</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      mydir/               0                 0 2022-07-27 15:17:38         755</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 mydir/file1              15                10 2022-07-27 15:17:38         644</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 mydir/file2              16                11 2022-07-27 15:17:38         644</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      crc32 offset</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 00000000      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 00effe3a     36</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 735af9a0    108</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Add another file</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"third file"</span>, file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tmp</span>, <span class="st">"mydir"</span>, <span class="st">"file3"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">zip_append</span><span class="op">(</span><span class="va">zipfile</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"mydir"</span>, <span class="st">"file3"</span><span class="op">)</span>, root <span class="op">=</span> <span class="va">tmp</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="zip_list.html">zip_list</a></span><span class="op">(</span><span class="va">zipfile</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      filename compressed_size uncompressed_size           timestamp permissions</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      mydir/               0                 0 2022-07-27 15:17:38         644</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 mydir/file1              15                10 2022-07-27 15:17:38         644</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 mydir/file2              16                11 2022-07-27 15:17:38         644</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 mydir/file3              15                10 2022-07-27 15:17:38         600</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      crc32 offset</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 00000000      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 00effe3a     36</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 735af9a0    108</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 b0bf9ffe    181</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Gábor Csárdi.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

